import{f as q,a as O}from"../chunks/DwlJhbsU.js";import{i as re}from"../chunks/D_aKDRwM.js";import{L as Q,h as H,V as Ee,a as Y,G as xe,F as ke,l as D,ax as Ce,I as Ie,J as Me,K as ue,M as X,e as B,a3 as Ae,aq as Ne,aa as ve,c as J,b as te,s as ze,ao as ie,aK as ge,a1 as fe,Q as _e,aL as Le,aM as Re,aN as Oe,aO as P,r as me,p as be,aP as Z,ak as Pe,an as qe,d as De,aQ as Fe,N as He,R as Ve,aR as We,aS as Ue,aT as Ge,t as oe,w as K,y as k,A as M,x as le,z as E,aU as Be,ab as Je,v as Ke,U as Qe}from"../chunks/C5M4pO5w.js";import{e as j,s as ae}from"../chunks/CBP7DBB-.js";import{i as ye,s as F,a as ce,d as Ye,b as Xe,_ as Ze}from"../chunks/BgI7IAIL.js";import{w as L,g as je,o as et}from"../chunks/CquTQfoA.js";function tt(e,a){return a}function at(e,a,r){for(var l=[],u=a.length,i,o=a.length,n=0;n<u;n++){let v=a[n];be(v,()=>{if(i){if(i.pending.delete(v),i.done.add(v),i.pending.size===0){var h=e.outrogroups;ne(ie(i.done)),h.delete(i),h.size===0&&(e.outrogroups=null)}}else o-=1},!1)}if(o===0){var f=l.length===0&&r!==null;if(f){var s=r,c=s.parentNode;qe(c),c.append(s),e.items.clear()}ne(a,!f)}else i={pending:new Set(a),done:new Set},(e.outrogroups??=new Set).add(i)}function ne(e,a=!0){for(var r=0;r<e.length;r++)De(e[r],a)}var de;function nt(e,a,r,l,u,i=null){var o=e,n=new Map;{var f=e;o=H?Q(Ee(f)):f.appendChild(Y())}H&&xe();var s=null,c=Ce(()=>{var d=r();return ge(d)?d:d==null?[]:ie(d)}),v,h=!0;function S(){_.fallback=s,st(_,v,o,a,l),s!==null&&(v.length===0?(s.f&P)===0?me(s):(s.f^=P,U(s,null,o)):be(s,()=>{s=null}))}var t=ke(()=>{v=D(c);var d=v.length;let g=!1;if(H){var b=Ie(o)===Me;b!==(d===0)&&(o=ue(),Q(o),X(!1),g=!0)}for(var N=new Set,p=J,A=ze(),w=0;w<d;w+=1){H&&B.nodeType===Ae&&B.data===Ne&&(o=B,g=!0,X(!1));var m=v[w],$=l(m,w),C=h?null:n.get($);C?(C.v&&ve(C.v,m),C.i&&ve(C.i,w),A&&p.skipped_effects.delete(C.e)):(C=rt(n,h?o:de??=Y(),m,$,w,u,a,r),h||(C.e.f|=P),n.set($,C)),N.add($)}if(d===0&&i&&!s&&(h?s=te(()=>i(o)):(s=te(()=>i(de??=Y())),s.f|=P)),H&&d>0&&Q(ue()),!h)if(A){for(const[V,y]of n)N.has(V)||p.skipped_effects.add(y.e);p.oncommit(S),p.ondiscard(()=>{})}else S();g&&X(!0),D(c)}),_={effect:t,items:n,outrogroups:null,fallback:s};h=!1,H&&(o=B)}function st(e,a,r,l,u){var i=a.length,o=e.items,n=e.effect.first,f,s=null,c=[],v=[],h,S,t,_;for(_=0;_<i;_+=1){if(h=a[_],S=u(h,_),t=o.get(S).e,e.outrogroups!==null)for(const $ of e.outrogroups)$.pending.delete(t),$.done.delete(t);if((t.f&P)!==0)if(t.f^=P,t===n)U(t,null,r);else{var d=s?s.next:n;t===e.effect.last&&(e.effect.last=t.prev),t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),R(e,s,t),R(e,t,d),U(t,d,r),s=t,c=[],v=[],n=s.next;continue}if((t.f&Z)!==0&&me(t),t!==n){if(f!==void 0&&f.has(t)){if(c.length<v.length){var g=v[0],b;s=g.prev;var N=c[0],p=c[c.length-1];for(b=0;b<c.length;b+=1)U(c[b],g,r);for(b=0;b<v.length;b+=1)f.delete(v[b]);R(e,N.prev,p.next),R(e,s,N),R(e,p,g),n=g,s=p,_-=1,c=[],v=[]}else f.delete(t),U(t,n,r),R(e,t.prev,t.next),R(e,t,s===null?e.effect.first:s.next),R(e,s,t),s=t;continue}for(c=[],v=[];n!==null&&n!==t;)(f??=new Set).add(n),v.push(n),n=n.next;if(n===null)continue}(t.f&P)===0&&c.push(t),s=t,n=t.next}if(e.outrogroups!==null){for(const $ of e.outrogroups)$.pending.size===0&&(ne(ie($.done)),e.outrogroups?.delete($));e.outrogroups.size===0&&(e.outrogroups=null)}if(n!==null||f!==void 0){var A=[];if(f!==void 0)for(t of f)(t.f&Z)===0&&A.push(t);for(;n!==null;)(n.f&Z)===0&&n!==e.fallback&&A.push(n),n=n.next;var w=A.length;if(w>0){var m=i===0?r:null;at(e,A,m)}}}function rt(e,a,r,l,u,i,o,n){var f=(o&Re)!==0?(o&Oe)===0?_e(r,!1,!1):fe(r):null,s=(o&Le)!==0?fe(u):null;return{v:f,i:s,e:te(()=>(i(a,f??r,s??u,n),()=>{e.delete(l)}))}}function U(e,a,r){if(e.nodes)for(var l=e.nodes.start,u=e.nodes.end,i=a&&(a.f&P)===0?a.nodes.start:r;l!==null;){var o=Pe(l);if(i.before(l),l===u)return;l=o}}function R(e,a,r){a===null?e.effect.first=r:a.next=r,r===null?e.effect.last=a:r.prev=a}function Se(e,a,r=!1){if(e.multiple){if(a==null)return;if(!ge(a))return We();for(var l of e.options)l.selected=a.includes(G(l));return}for(l of e.options){var u=G(l);if(Ue(u,a)){l.selected=!0;return}}(!r||a!==void 0)&&(e.selectedIndex=-1)}function it(e){var a=new MutationObserver(()=>{Se(e,e.__value)});a.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Ve(()=>{a.disconnect()})}function ot(e,a,r=a){var l=new WeakSet,u=!0;Fe(e,"change",i=>{var o=i?"[selected]":":checked",n;if(e.multiple)n=[].map.call(e.querySelectorAll(o),G);else{var f=e.querySelector(o)??e.querySelector("option:not([disabled])");n=f&&G(f)}r(n),J!==null&&l.add(J)}),He(()=>{var i=a();if(e===document.activeElement){var o=Ge??J;if(l.has(o))return}if(Se(e,i,u),u&&i===void 0){var n=e.querySelector(":checked");n!==null&&(i=G(n),r(i))}e.__value=i,u=!1}),it(e)}function G(e){return"__value"in e?e.__value:e.value}const lt=L("Human influence has likely increased the chance of compound extreme events since the 1950s"),se=L({segments:.5,hue:200,speed:.05,noiseScale:.01}),he=L(""),ct=L([]),ut=L(""),ee=L(!1),pe=L("maintained"),we=L(0),$e=L([]),vt="https://ipcc-tiled-obj01lfn4-dianas-projects-55ea9504.vercel.app/api/transform";async function ft(e,a,r){const l=await fetch(vt,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:e,feature:a,patternStatus:r})});if(!l.ok)throw new Error("API error:"+l.status);return l.json()}var dt=q('<p class="grey-title svelte-d1h2e2">Translation</p> <p class="sentence svelte-d1h2e2"> </p>',1),ht=q('<div class="controls svelte-d1h2e2"><div class="transform-controls svelte-d1h2e2"><div class="buttons"><p class="grey-title svelte-d1h2e2">Change the linguistic features</p> <button class="svelte-d1h2e2">vocab</button> <button class="svelte-d1h2e2">modality</button> <button class="svelte-d1h2e2">transitivity</button></div> <div class="dropdown svelte-d1h2e2"><select class="svelte-d1h2e2"><option>maintain</option><option>changed</option><option>omitted</option></select> <p>uncertainty pattern</p></div></div> <div class="sentences"><p class="grey-title svelte-d1h2e2">IPCC</p> <p class="sentence svelte-d1h2e2"> </p> <!></div></div>');function pt(e,a){oe(a,!1);const r=()=>F(he,"$currentSentence",o),l=()=>F(lt,"$originalSentence",o),u=()=>F(pe,"$patternStatus",o),i=()=>F(ee,"$loading",o),[o,n]=ce();function f(y){return y.replace(/\*\*/g,"")}function s(y,I,z,x){const T=[];return z==="vocab"&&(I.segments>3?T.push("vocabulary became more complex"):T.push("vocabulary became more simple")),z==="modality"&&(I.hue>=180&&I.hue<=240?T.push("modality became more certain"):I.hue>=20&&I.hue<=60&&T.push("modality became less certain")),z==="transitivity"&&(I.speed>.005?T.push("transitivity increased"):T.push("transitivity decreased")),{feature:z,patternStatus:x,summary:T.join("; "),timestamp:Date.now()}}async function c(y){ee.set(!0);try{const I=r()||l(),z=je(se),x=await ft(I,y,u());he.set(x.text),ut.set(x.actorGuess||""),console.log(x);const T={segments:x.segments,hue:x.hue,speed:x.speed,noiseScale:x.noiseScale};se.set(T),ct.update(W=>[...W,{feature:y,patternStatus:u(),text:x.text,...T}]);const Te=s(z,T,y,u());$e.update(W=>[...W,Te]),we.update(W=>W+1)}finally{ee.set(!1)}}re();var v=ht(),h=k(v),S=k(h),t=M(k(S),2),_=M(t,2),d=M(_,2);E(S);var g=M(S,2),b=k(g);K(()=>{u(),Be(()=>{i()})});var N=k(b);N.value=N.__value="maintained";var p=M(N);p.value=p.__value="changed";var A=M(p);A.value=A.__value="omitted",E(b),Je(2),E(g),E(h);var w=M(h,2),m=M(k(w),2),$=k(m,!0);E(m);var C=M(m,2);{var V=y=>{var I=dt(),z=M(Ke(I),2),x=k(z,!0);E(z),K(T=>ae(x,T),[()=>f(r())]),O(y,I)};ye(C,y=>{r()&&y(V)})}E(w),E(v),K(()=>{t.disabled=i(),_.disabled=i(),d.disabled=i(),b.disabled=i(),ae($,l())}),j("click",t,()=>c("vocab")),j("click",_,()=>c("modality")),j("click",d,()=>c("transitivity")),ot(b,u,y=>Ye(pe,y)),O(e,v),le(),n()}var gt=q('<p class="list svelte-hhqi92">No transformations yet</p>'),_t=q('<li class="list svelte-hhqi92"><span class="summary"> </span></li>'),mt=q("<ul></ul>"),bt=q('<div class="log"><p>Transformations</p> <!></div>');function yt(e,a){oe(a,!1);const r=()=>F($e,"$visualLog",l),[l,u]=ce();re();var i=bt(),o=M(k(i),2);{var n=s=>{var c=gt();O(s,c)},f=s=>{var c=mt();nt(c,5,r,tt,(v,h)=>{var S=_t(),t=k(S),_=k(t,!0);E(t),E(S),K(()=>ae(_,D(h).summary)),O(v,S)}),E(c),O(s,c)};ye(o,s=>{r().length===0?s(n):s(f,!1)})}E(i),O(e,i),le(),u()}var St=q('<div class="sketch-container svelte-zlvozy"></div>');function wt(e,a){oe(a,!1);const r=()=>F(se,"$visualParams",u),l=()=>F(we,"$motionTrigger",u),[u,i]=ce();let o=0,n=0;const f=2e3;let s=_e(),c;et(async()=>{const h=await Ze(()=>import("../chunks/D1CrHxKP.js").then(t=>t.p),[],import.meta.url),S=h.default||h;return c=new S(t=>{let _=0;t.setup=()=>{const d=D(s).clientWidth||600,g=Math.min(d,600);t.createCanvas(g,g),t.background(255),t.noFill()},t.draw=()=>{const d=r(),g=l();g!==o&&(o=g,n=performance.now());const b=performance.now(),N=n&&b-n<f;t.stroke(`hsl(${d.hue}, 70%, 50%)`),t.strokeWeight(d.segments*.1);const p=d.noiseScale||.01,A=Math.max(1,Math.floor(d.segments||1));for(let w=0;w<A;w++){const m=_+w*20*p,$=t.width*t.noise(m+15*p),C=t.width*t.noise(m+25*p),V=t.width*t.noise(m+35*p),y=t.width*t.noise(m+45*p),I=t.height*t.noise(m+55*p),z=t.height*t.noise(m+65*p),x=t.height*t.noise(m+75*p),T=t.height*t.noise(m+85*p);t.bezier($,I,C,z,V,x,y,T)}N&&(_+=d.speed||.005)},t.windowResized=()=>{const d=D(s).clientWidth||600,g=Math.min(d,600);t.resizeCanvas(g,g),t.background(255)}},D(s)),()=>{c&&c.remove()}}),re();var v=St();Xe(v,h=>Qe(s,h),()=>D(s)),O(e,v),le(),i()}var $t=q('<div class="app"><div class="col svelte-1uha8ag"><!> <!></div> <div class="log svelte-1uha8ag"><!></div></div>');function Mt(e){var a=$t(),r=k(a),l=k(r);pt(l,{});var u=M(l,2);wt(u,{}),E(r);var i=M(r,2),o=k(i);yt(o,{}),E(i),E(a),O(e,a)}export{Mt as component};
